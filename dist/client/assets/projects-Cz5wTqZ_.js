import{j as e,r as a,R as x}from"./main-swjt5jVY.js";function k({project:s}){return e.jsx("div",{className:"bg-white border border-gray-300 rounded-lg p-6 mb-4 w-full flex flex-col",children:e.jsxs("div",{className:"flex flex-row items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-bold text-lg text-gray-900",children:s.name}),e.jsxs("div",{className:"text-gray-700 text-sm",children:["ID: ",s.projectId]}),e.jsxs("div",{className:"text-gray-700 text-sm",children:["Description: ",s.description]})]}),e.jsx("button",{type:"button",className:"bg-blue-600 hover:bg-blue-700 text-white font-semibold px-4 py-2 rounded",onClick:()=>window.location.href=`/projects/${s.projectId}`,children:"Details"})]})})}const D={};function z(){const s=D?.VITE_API_URL??"http://127.0.0.1:8000",n=typeof window<"u"?localStorage.getItem("token"):null,I={projectId:"dummy123",name:"Dummy Project",description:"This is a dummy project for testing purposes.",owner:"testuser",authorizedUsers:["testuser","alice","bob"]},[h,d]=a.useState([I]),[C,i]=a.useState(!0),[g,p]=a.useState(null),[u,f]=a.useState(""),[j,b]=a.useState(""),[y,w]=a.useState(""),[N,P]=a.useState(""),[m,v]=a.useState("");x.useEffect(()=>{async function t(){if(!n){alert("Please log in first."),i(!1);return}try{const r=await fetch(`${s}/projects/user-projects`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${n}`}}),o=await r.json().catch(()=>[]);if(!r.ok)throw new Error(o?.detail||"Failed to fetch projects");d(o.projects||[])}catch(r){p(r?.message??String(r))}finally{i(!1)}}t()},[n,s]);async function S(){try{if(!n){alert("Please log in first.");return}const t={projectId:j.trim(),name:u.trim(),description:y.trim(),authorizedUsers:N.split(",").map(l=>l.trim()).filter(Boolean)},r=await fetch(`${s}/projects/create`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${n}`},body:JSON.stringify(t)}),o=await r.json().catch(()=>({}));if(!r.ok)throw new Error(o?.detail||"Create failed");alert(`Project created: ${o.projectId}`),f(""),b(""),w(""),P(""),i(!0),p(null),x.startTransition(()=>{d(l=>[...l,o])})}catch(t){alert(t?.message??String(t))}}async function L(){try{if(!n){alert("Please log in first.");return}const t=await fetch(`${s}/projects/login`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${n}`},body:JSON.stringify({projectId:m.trim()})}),r=await t.json().catch(()=>({}));if(!t.ok)throw new Error(r?.detail||"Login failed");localStorage.setItem("projectId",r.projectId),alert(`Logged into project: ${r.name}`),v(""),i(!0),p(null),x.startTransition(()=>{d(o=>o.some(l=>l.projectId===r.projectId)?o:[...o,r])})}catch(t){alert(t?.message??String(t))}}let c;return C?c=e.jsx("div",{className:"text-gray-700 text-center",children:"Loading projects..."}):g?c=e.jsx("div",{className:"text-red-600 text-center",children:g}):h.length===0?c=e.jsx("div",{className:"text-gray-700 text-center",children:"No projects found."}):c=e.jsx("div",{className:"flex flex-col gap-4",children:h.map(t=>e.jsx(k,{project:t},t.projectId))}),e.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gray-100",children:e.jsxs("div",{className:"flex flex-row gap-8",children:[e.jsxs("div",{className:"flex flex-col gap-8 p-8 bg-white border border-black rounded w-[35rem] min-w-[20rem]",children:[e.jsx("h2",{className:"text-2xl font-bold text-center mb-2 text-gray-900",children:"Project List"}),c]}),e.jsxs("div",{className:"flex flex-col gap-8 p-8 bg-white border border-black rounded w-96",children:[e.jsx("h1",{className:"text-2xl font-bold text-center mb-2 text-gray-900",children:"Project Management"}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{htmlFor:"projectName",className:"font-semibold text-gray-900",children:"Create a new project"}),e.jsx("input",{id:"projectName",value:u,onChange:t=>f(t.target.value),className:"border rounded w-full px-2 py-1",placeholder:"Project Name"}),e.jsx("input",{id:"projectId",value:j,onChange:t=>b(t.target.value),className:"border rounded w-full px-2 py-1",placeholder:"Project ID (unique)"}),e.jsx("input",{id:"projectDescription",value:y,onChange:t=>w(t.target.value),className:"border rounded w-full px-2 py-1",placeholder:"Project Description"}),e.jsx("input",{id:"authorizedUsers",value:N,onChange:t=>P(t.target.value),className:"border rounded w-full px-2 py-1",placeholder:"Authorized Users (comma-separated)"}),e.jsx("button",{type:"button",className:"bg-green-600 hover:bg-green-700 text-white font-semibold px-4 py-2 rounded mt-2",onClick:S,disabled:!u.trim()||!j.trim(),children:"Create Project"})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{htmlFor:"loginProjectId",className:"font-semibold text-gray-900",children:"Login to existing project"}),e.jsx("input",{id:"loginProjectId",value:m,onChange:t=>v(t.target.value),className:"border rounded w-full px-2 py-1",placeholder:"Project ID"}),e.jsx("button",{type:"button",className:"bg-blue-600 hover:bg-blue-700 text-white font-semibold px-4 py-2 rounded mt-2",onClick:L,disabled:!m.trim(),children:"Login to Project"})]})]})]})})}export{z as component};
